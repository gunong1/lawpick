import { GoogleGenerativeAI } from '@google/generative-ai';

export const maxDuration = 30;

const genAI = new GoogleGenerativeAI(process.env.GOOGLE_GENERATIVE_AI_API_KEY || '');

const SYSTEM_PROMPT = `[Role]
너는 대한민국 5대 대형 법무법인 소속 15년차 소송 전문 변호사다.
의뢰인의 사연을 바탕으로 상대방에게 보낼 법적 효력 있는 "내용증명"을 작성한다.
내용증명은 상대방에게 심리적 압박을 가하고, 법적 의지를 명확히 전달하며, 추후 소송에서 증거로 활용될 수 있는 공식 법률 문서이므로 전문성과 구체성이 매우 중요하다.

[★★★ 최우선 원칙: 역할 판단 ★★★]
1. **사연 작성자 = 발신인(의뢰인)**: 사연을 쓴 사람이 반드시 발신인이다. 절대 뒤바꾸지 말 것.
2. **상대방 = 수신인**: 사연에서 불만/피해를 호소하는 대상이 수신인이다.
3. **"~에게" 패턴으로 역할 판단**:
   - "집주인에게 연락했다" → 발신인은 세입자(임차인), 수신인은 집주인(임대인)
   - "세입자에게 연락했다", "세입자가 월세를 안 낸다" → 발신인은 집주인(임대인), 수신인은 세입자(임차인)
4. **보증금 반환 요구 판단**:
   - "보증금을 못 받을까봐", "보증금 안 돌려줘" → 발신인은 임차인
   - "월세를 안 냄", "차임 연체" → 발신인은 임대인
5. **introduction 필드에서 반드시 발신인의 역할을 정확히 기재할 것**

[★★★ 핵심 작성 규칙 ★★★]

1. **사연에서 구체적 사실을 반드시 추출하여 반영할 것**
   - 날짜, 기간 (예: "3개월째", "지난달" → 구체적 시기로 변환)
   - 금액 (예: "3천만 원", "600만 원" → 정확한 금액을 본문에 여러 번 반복 인용)
   - 플랫폼/경로 (예: "인스타그램", "중고나라", "카카오톡")
   - 상대방의 구체적 언행 (예: "결혼하겠다고 했다", "계좌가 묶였다고 했다" → 인용부호로 직접 인용)
   - 물품명, 주소, 계약 조건 등 모든 특정 가능한 정보

2. **문체 규칙**
   - 반드시 "하였습니다/있습니다/바입니다" 법조문 경어체 사용
   - "해요/했어요" 같은 구어체 절대 금지
   - 문단마다 번호를 매기고, 각 문단은 2~4문장으로 구성할 것
   - "이하 ~라 한다" 같은 법률 문서 관용구를 적절히 사용

3. **본문(body) 작성 규칙 - 매우 중요!!**
   - 반드시 8~12개의 번호 매긴 문단으로 작성 (절대 5개 이하 금지!)
   - 각 문단은 최소 2~3문장으로 구성
   - 아래 구조를 반드시 따를 것:
     (1~2) 당사자 관계 및 계약/거래의 경위
     (3~4) 상대방의 구체적인 위법/위반 행위 서술 (사연에서 추출한 사실을 직접 인용)
     (5~6) 피해 상황 및 손해 내역 상세 기술
     (7~8) 발신인의 대응 노력 및 상대방의 불성실한 태도
     (9~10) 법적 평가 및 상대방 행위의 위법성 지적
     (11~12) 최종 요구사항 및 불이행 시 법적 조치 예고
   - 사연에 나온 상대방의 말("내가 갚겠다" 등)은 반드시 큰따옴표로 직접 인용

4. **법적 근거(legalBasis) 규칙**
   - 반드시 3개 이상의 법조문을 구체적으로 인용 (조문 번호 + 제목 + 법정형/효과)
   - 형사법과 민사법을 구분하여 각각 기재
   - 특별법이 있으면 반드시 추가 (예: 특경법, 정보통신망법, 주임법 등)
   - 판례가 있으면 대법원 판례번호를 인용

5. **경고(warning) 규칙**
   - 형사적 조치 (고소/고발, 예상 형량)와 민사적 조치 (손배소송, 가압류, 지급명령)를 나누어 구체적으로 기재
   - 부수적 불이익 (전과기록, 신용등급 하락, 출국금지 등)도 명시
   - 지연손해금 이율(연 12%, 상사는 연 6%) 명시

6. **요구사항(demands) 규칙**
   - 반드시 4~6개의 구체적 요구사항 기재
   - 금액이 있는 경우 정확한 금액을 명시
   - 이행 기한, 이행 방법(계좌 입금, 서면 통보 등)을 구체적으로 명시
   - 단순 반복 금지, 각 항목이 실질적으로 다른 내용이어야 함

[사건 유형별 추출·반영 지침]
- 중고거래 사기: 플랫폼명, 물품명, 거래일, 입금액, 입금일, 판매자 계좌번호/연락처, 잠적 일시, 차단 정황, 동일 피해자 존재 여부
- 로맨스 스캠: SNS 플랫폼, 만남 시기/기간, 상대방 사칭 신분, 투자 권유 경위, 거래소 사이트명/URL, 입금 횟수/총액, 허위 수익률, 추가 입금 요구 명목(세금/수수료), 상대방 변명("계좌 묶였다" 등)
- 임대차: 주소, 계약일/만기일, 보증금/월세 액수, 연체 기간/횟수/총액, 상대방 회피 행태, 임차권등기 여부
- 금전 대여: 차용일, 금액, 변제 약정일, 이자 약정, 상환 독촉 횟수/방법, 차용증 존부
- 폭행/상해: 일시, 장소, 폭행 방법, 상해 정도(진단서), 목격자/CCTV 유무
- 명예훼손: 플랫폼, 게시일, 구체적 표현 인용, 열람자 수, 피해 정도
- 직장 괴롭힘: 가해자 직급, 괴롭힘 유형, 기간, 목격자, 회사 신고 여부
- 소비자 분쟁: 구매일, 물품/서비스명, 결제액, 하자 내용, 환불 요청 경위

[출력 형식 - JSON Only, 마크다운 금지]
{
  "title": "제목 (예: 사기 피해에 따른 손해배상 청구 및 형사고소 예고의 건)",
  "header": "내 용 증 명",
  "parties": {
    "recipient": "수신인: OOO",
    "sender": "발신인: OOO"
  },
  "introduction": "발신인 소개 및 본 내용증명의 취지 (2~3문장, 발신인의 역할과 본 서면의 목적을 명확히)",
  "body": "본문 (8~12개 번호 문단, 각 문단 2~3문장. 사건 경위→위법행위→피해상황→대응노력→법적평가→요구예고 순서로 상세 서술. 사연의 구체적 사실을 모두 반영하고 상대방 발언은 직접 인용할 것)",
  "legalBasis": "법적 근거 (3개 이상 법조문을 조문번호+제목+법정형 포함하여 구체적으로. 형사법/민사법/특별법 구분 기재)",
  "warning": "불이행 시 법적 조치 경고 (형사적 조치와 민사적 조치를 나누어 구체적으로 기재. 전과기록, 지연손해금 이율, 가압류 등 부수적 불이익도 명시)",
  "deadline": "본 서면 도달일로부터 7일 이내",
  "demands": ["요구 사항 1", "요구 사항 2", "요구 사항 3", "요구 사항 4"]
}`;

export async function POST(req: Request) {
    try {
        const { content, senderName, recipientName } = await req.json();

        if (!content) {
            return Response.json({ success: false, error: '내용이 필요합니다.' });
        }

        try {
            const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });

            const result = await model.generateContent([
                { text: SYSTEM_PROMPT },
                {
                    text: `[발신인 정보]
이름: ${senderName || '(미입력)'}

[수신인 정보]  
이름: ${recipientName || '(미입력)'}

[사건 내용]
${content}

★★★ 최종 지시사항 ★★★
1. 위 사연을 쓴 사람이 발신인(의뢰인)이다.
2. 사연에서 "~에게 연락했다", "~에게 통보했다" 등의 표현으로 발신인과 수신인의 관계를 정확히 파악할 것.
3. 사연에 나온 구체적 사실(금액, 날짜, 플랫폼, 상대방 발언 등)을 반드시 본문에 포함시킬 것.
4. 상대방이 한 말("내가 갚겠다", "계좌가 묶였다" 등)은 큰따옴표로 직접 인용할 것.
5. body는 반드시 8~12개 번호 매긴 문단으로 작성. 각 문단 2~3문장. 5개 이하 문단은 절대 금지!
6. legalBasis는 반드시 3개 이상 법조문 인용(조문번호+제목+법정형).
7. demands는 반드시 4~6개.
8. JSON 형식으로만 출력. 마크다운 코드블록 없이.` }
            ]);

            const responseText = result.response.text();
            console.log('[Legal Letter AI Response]', responseText.substring(0, 500));

            // JSON 파싱 (마크다운 제거)
            const cleanJson = responseText.replace(/\`\`\`json|\`\`\`/g, '').trim();
            const jsonMatch = cleanJson.match(/\{[\s\S]*\}/);

            if (jsonMatch) {
                const parsed = JSON.parse(jsonMatch[0]);
                return Response.json({
                    success: true,
                    data: {
                        title: parsed.title || '내용증명',
                        header: parsed.header || '내 용 증 명',
                        parties: parsed.parties || { recipient: `수신인: ${recipientName}`, sender: `발신인: ${senderName}` },
                        introduction: parsed.introduction || '',
                        body: parsed.body || '',
                        legalBasis: parsed.legalBasis || '',
                        warning: parsed.warning || '위 기한 내 이행이 없을 경우, 본인은 즉시 법적 조치를 취할 것입니다.',
                        deadline: parsed.deadline || '본 서면 도달일로부터 7일 이내',
                        demands: parsed.demands || []
                    }
                });
            } else {
                throw new Error('JSON 파싱 실패');
            }

        } catch (aiError: any) {
            console.error('Gemini API 오류 (Fallback 실행):', aiError);

            // -------------------------------------------------------------------
            // [Fallback Logic] 규칙 기반 생성 (개선된 버전)
            // -------------------------------------------------------------------
            return Response.json({
                success: true,
                data: generateFallbackLetter(content, senderName, recipientName)
            });
        }

    } catch (error: any) {
        console.error('Legal Letter API Error:', error);
        return Response.json({ success: false, error: error.message }, { status: 500 });
    }
}

// Fallback 내용증명 생성
function generateFallbackLetter(content: string, senderName: string, recipientName: string) {
    // 금액 추출
    let money = '(금액 미상)';
    // 한글 수사 + 숫자 모두 지원
    const moneyPatterns = [
        /(\d+)\s*억\s*(\d*\s*천)?\s*만?\s*원/g,
        /(\d+)\s*천\s*만\s*원/g,
        /(\d+)\s*백\s*만\s*원/g,
        /(\d{1,3}(?:,\d{3})*)\s*만\s*원/g,
        /(\d+)\s*억/g
    ];
    for (const pattern of moneyPatterns) {
        const match = content.match(pattern);
        if (match) { money = match[0]; break; }
    }

    // 플랫폼 추출
    const platformMatch = content.match(/중고나라|당근마켓|번개장터|네이버카페|인스타그램|트위터|페이스북/);
    const platform = platformMatch ? platformMatch[0] : null;

    // 물품 추출
    const itemMatch = content.match(/시계|가방|핸드폰|아이폰|갤럭시|노트북|컴퓨터|차량|자동차|명품|옷|의류/);
    const item = itemMatch ? itemMatch[0] : '물품';

    let title = '';
    let introduction = '';
    let body = '';
    let legalBasis = '';
    let warning = '';
    let demands: string[] = [];

    // ========================
    // 1. 전세사기 / 깡통전세 / 경매 (최우선)
    // ========================
    const isRentalFraud = /전세.*사기|깡통.*전세|경매|근저당|선순위|배당/.test(content) ||
        ((/전세|보증금/.test(content)) && (/사기|경매|근저당|잠적/.test(content)));

    if (isRentalFraud) {
        title = '임대차보증금 반환 청구 및 법적 조치 예고의 건';
        introduction = `본인(${senderName})은 귀하와 임대차 계약을 체결하였던 임차인으로서, 귀하의 기망행위 또는 채무불이행으로 인해 심각한 재산 피해를 입은 피해자입니다.`;

        body = `1. 본인은 귀하와 임대차 계약을 체결하고 임대차보증금 ${money}을 지급한 후, 해당 부동산에서 거주하여 왔습니다.

2. 그러나 본인이 등기부등본을 확인한 결과, 해당 부동산에는 본인의 확정일자보다 앞선 선순위 근저당권이 다수 설정되어 있으며, 귀하는 이러한 사실을 본인에게 고지하지 아니하였습니다.

3. 현재 귀하는 해당 부동산이 경매에 넘어갈 수 있다고 통보하였거나, 이미 경매 절차가 진행 중인 것으로 파악됩니다. 이로 인해 본인은 임대차보증금 전액을 반환받지 못할 심각한 위험에 처해 있습니다.

4. 귀하는 본인의 수차례 연락에도 응하지 않거나, 보증금 반환에 관한 구체적인 계획을 제시하지 않고 있는바, 이는 본인에 대한 명백한 기망행위 내지 채무불이행에 해당합니다.

5. 이에 본인은 귀하에게 아래와 같이 임대차보증금의 즉시 반환을 청구하며, 불응 시 민·형사상 모든 법적 조치를 취할 것임을 엄중히 통보합니다.`;

        legalBasis = '주택임대차보호법 제3조의3에 따르면 임차인은 임대인에게 보증금의 반환을 청구할 수 있으며, 형법 제347조(사기죄)에 따르면 사람을 기망하여 재산상 이익을 취득한 자는 10년 이하의 징역 또는 2천만 원 이하의 벌금에 처합니다. 또한 민법 제750조(불법행위)에 의거하여 손해배상을 청구할 수 있습니다.';

        warning = `위 기한 내 임대차보증금 전액 반환이 없을 경우, 본인은 즉시 법원에 임차권등기명령을 신청하고, 보증금 반환 청구 소송을 제기할 것입니다. 또한, 귀하의 기망행위가 확인될 경우 관할 경찰서에 사기죄로 형사고소를 진행할 것입니다. 귀하는 보증금 원금은 물론, 지연손해금(연 12%), 소송비용, 변호사 보수, 그리고 정신적 피해에 대한 위자료 전액을 부담하게 됨을 엄중히 경고합니다.`;

        demands = [
            `임대차보증금 ${money} 전액을 즉시 반환할 것`,
            '보증금 반환 계획 및 일정을 3일 이내 서면으로 통보할 것',
            '해당 부동산의 경매 진행 상황을 지체 없이 통보할 것',
            '전세보증금반환보증(HUG/SGI) 가입 시 보험금 청구에 협조할 것'
        ];
    }
    // ========================
    // 1-2. 상가 권리금 분쟁 (권리금 + 건물주 재계약 거부)
    // ========================
    else if (/권리금/.test(content) && /건물주|임대인|재계약|갱신|만기|나가|비워|명도/.test(content)) {
        title = '상가 권리금 회수 방해행위 중단 요청 및 손해배상 예고의 건';
        introduction = `본인(${senderName})은 귀하 소유 상가건물에서 영업을 영위하여 온 임차인입니다. 본인은 상가건물 임대차보호법에 따라 보호되는 권리금 회수 기회를 귀하가 부당하게 방해하고 있어 부득이 본 내용증명을 발송하는 바입니다.`;

        body = `1. 본인은 귀하 소유 상가건물에서 장기간 영업을 영위하여 왔으며, 입점 시 기존 임차인에게 바닥 권리금으로 ${money}을 지급하고 영업을 개시하였습니다. 이후 본인은 상당한 시간과 비용을 투자하여 인테리어를 시공하고 단골 고객을 확보하는 등 영업기반을 구축하여 왔습니다.

2. 그런데 귀하는 최근 본인에게 이번 임대차계약 만기 시 재계약(갱신)을 해주지 않겠다고 일방적으로 통보하였습니다. 이는 본인의 상가건물 임대차보호법 제10조에 따른 계약갱신요구권을 부당하게 거절하는 것입니다.

3. 본인이 확인한 바에 따르면, 귀하는 본인의 가게 자리에 귀하의 가족(아들 등)이 동종 또는 유사 업종의 프랜차이즈 매장을 개업하려는 것으로 파악됩니다. 이는 상가건물 임대차보호법 제10조의4 제2항 제4호에서 금지하는 '임대인이 임차인이 주선한 신규임차인과 정당한 사유 없이 계약을 거절하는 행위'에 해당합니다.

4. 더 나아가 귀하는 본인이 주선한 신규 임차인(양수인)과의 계약 체결마저 거부하겠다고 명시적으로 밝혔습니다. 이는 상가건물 임대차보호법 제10조의4 제1항에 따른 권리금 회수 기회 보호 규정을 정면으로 위반하는 것입니다.

5. 귀하께서는 임대차계약서에 "권리금 인정 안 함"이라는 특약이 있다고 주장할 수 있으나, 상가건물 임대차보호법 제15조는 이 법의 규정에 위반된 약정으로서 임차인에게 불리한 것은 효력이 없다고 명시하고 있습니다. 따라서 해당 특약은 강행규정에 반하는 것으로서 법적 효력이 없습니다. 이는 대법원 판례(2019다242383 등)에서도 확인된 법리입니다.

6. 본인이 그간 구축한 영업가치(바닥 권리금, 시설 권리금, 영업 권리금)를 종합하면, 현재 시점의 권리금은 최소 ${money} 이상으로 산정됩니다. 귀하의 부당한 거절로 인해 본인이 이를 회수하지 못하게 될 경우, 그 전액이 본인의 손해가 됩니다.

7. 상가건물 임대차보호법 제10조의4 제3항에 따르면, 임대인이 권리금 회수를 방해한 경우 임차인은 임대인에게 손해배상을 청구할 수 있으며, 그 손해배상액은 신규임차인이 임차인에게 지급하기로 한 권리금과 임대차 종료 당시의 권리금 중 낮은 금액을 넘지 못합니다.

8. 이에 본인은 귀하에게 본인이 주선하는 신규 임차인과의 임대차계약 체결에 정당하게 응할 것을 요구하며, 불응 시 즉시 법적 절차에 착수할 것임을 최종 통보합니다.

9. 본 내용증명은 귀하에 대한 권리금 회수 기회 보호 요청, 계약갱신 요구, 그리고 이를 거절할 경우의 손해배상 청구 의사를 공식적으로 통지하는 것이며, 향후 소송 절차에서 주요 증거자료로 활용될 것입니다.`;

        legalBasis = '상가건물 임대차보호법 제10조(계약갱신 요구 등)에 따르면 임차인은 최초 임대차 기간을 포함하여 전체 임대차 기간이 10년을 초과하지 않는 범위에서 계약갱신을 요구할 수 있습니다. 같은 법 제10조의4(권리금 회수기회 보호 등)에 따르면 임대인은 임대차기간이 끝나기 6개월 전부터 임대차 종료 시까지 정당한 사유 없이 임차인이 주선한 신규임차인과의 임대차계약 체결을 거절하여 임차인의 권리금 회수를 방해하여서는 아니 됩니다. 같은 법 제15조(강행규정)에 따르면 이 법의 규정에 위반된 약정으로서 임차인에게 불리한 것은 그 효력이 없으므로, "권리금 인정 안 함" 특약은 무효입니다.';

        warning = `귀하가 본인이 주선하는 신규 임차인과의 계약 체결에 정당하게 응하지 않을 경우, 본인은 다음과 같은 법적 조치를 즉시 취할 것입니다. 첫째, 상가건물 임대차보호법 제10조의4 제3항에 근거하여 권리금 상당(${money} 이상)의 손해배상 청구 소송을 제기하겠습니다. 둘째, 소송 전 귀하 소유 부동산에 대한 가압류를 신청하여 배상금 확보를 위한 보전처분을 진행하겠습니다. 셋째, 상가임대차분쟁조정위원회에 조정을 신청하겠습니다. 관련 판례에 따르면 임대인의 권리금 회수 방해에 대해 수천만 원~수억 원의 손해배상이 인정된 사례가 다수 있습니다. 또한 귀하가 가족에게 동종 업종을 영위하게 하려는 목적으로 재계약을 거절하는 것은 정당한 사유에 해당하지 않습니다(대법원 판례 참조).`;

        demands = [
            '본인이 주선하는 신규 임차인과 정당한 조건으로 임대차계약을 체결할 것',
            '본인의 계약갱신요구권을 부당하게 거절하지 말 것',
            `본인의 권리금 ${money} 회수 기회를 보장할 것`,
            '"권리금 인정 안 함" 특약의 무효를 인정하고, 권리금 회수 절차에 협조할 것',
            '가족에게 영업을 양도하려는 계획을 철회하거나, 본인에게 권리금 상당액을 직접 배상할 것',
            '본 서면 수령 후 7일 이내 서면으로 응답할 것'
        ];
    }
    // ========================
    // 2. 투자 사기 / 폰지 사기 / 다단계 (투자 키워드 우선) - ★빌려줘/차용 있으면 대여금으로 제외★
    // ========================
    else if (/투자|원금.*보장|수익.*보장|확정.*수익|폰지|다단계|코인|비트코인|리딩방|퇴직금/.test(content) && /사기|피해|못.*받|안.*줘|잠적|연락.*안|동결/.test(content) && !/빌려줬|빌려줌|빌렸|빌린|빌려준|차용|대여금|갚/.test(content)) {
        title = '투자금 반환 청구 및 형사고소 예고의 건';
        introduction = `본인(${senderName})은 귀하의 투자 권유를 신뢰하여 금원을 투자하였으나, 현재 심각한 재산 피해를 입은 피해자입니다.`;

        body = `1. 귀하는 본인에게 "원금 보장", "확정 수익" 등을 약속하며 투자를 권유하였고, 본인은 귀하를 신뢰하여 ${money}을 투자하였습니다.

2. 초기에는 약속한 수익금이 지급되었으나, 이후 수익금 지급이 중단되었고, 현재는 원금마저 반환받지 못하고 있는 상황입니다.

3. 귀하는 "세무조사", "계좌 동결", "일시적 자금 경색" 등의 핑계를 대며 원금 반환을 회피하고 있으며, 현재는 연락마저 두절된 상태입니다.

4. 본인이 확인한 바에 따르면, 본인 외에도 다수의 피해자가 귀하에게 동일한 방식으로 피해를 입은 것으로 파악되며, 이는 전형적인 '폰지 사기' 수법으로 판단됩니다.

5. 이에 본인은 귀하에게 투자 원금 전액의 즉각적인 반환을 요구하며, 불응 시 모든 법적 조치를 취할 것임을 통보합니다.`;

        legalBasis = '형법 제347조(사기죄)에 따르면 사람을 기망하여 재산상의 이익을 취득한 자는 10년 이하의 징역 또는 2천만 원 이하의 벌금에 처합니다. 또한 「유사수신행위의 규제에 관한 법률」에 따라 불특정 다수로부터 자금을 조달하는 행위는 별도의 처벌 대상입니다.';

        warning = `위 기한 내 투자금 전액 반환이 없을 경우, 본인은 즉시 경찰에 사기죄로 형사고소를 진행하고, 금융감독원에 불법 금융업으로 신고할 것입니다. 또한 귀하의 재산에 대한 가압류를 신청하여 재산 은닉을 방지하고, 민사소송을 통해 원금, 이자, 위자료를 전액 청구할 것임을 엄중히 경고합니다.`;

        demands = [
            `투자 원금 ${money} 전액을 즉시 반환할 것`,
            '반환 일정을 3일 이내 서면으로 통보할 것',
            '다른 피해자들에 대한 피해 보상 계획을 공개할 것'
        ];
    }
    // ========================
    // 3. 중고거래 사기 (플랫폼/물품거래 키워드 필수)
    // ========================
    else if (/중고나라|당근|번개|마켓|거래|판매|구매|물건|상품|배송/.test(content) && /사기|입금.*차단|물건.*안|잠적|먹튀|연락.*두절|차단/.test(content)) {
        title = '사기 피해에 따른 피해금 반환 청구 및 형사고소 예고의 건';
        introduction = `본인(${senderName})은 귀하와의 ${platform ? platform + ' 거래' : '온라인 거래'}에서 심각한 재산 피해를 입은 피해자입니다.`;

        body = `1. 본인은 ${platform ? platform + '을 통해' : '온라인상에서'} 귀하가 판매한다고 게시한 ${item}을 구매하기 위해 귀하가 지정한 계좌로 ${money}을 송금하였습니다.

2. 그러나 귀하는 대금 수령 이후 약속한 물품을 발송하지 아니하였고, 운송장 번호 요청에도 응하지 않은 채 일방적으로 연락을 두절하였습니다.

3. 현재 귀하의 연락처는 수신 거부(전화기 꺼짐) 상태이며, 본인의 수차례 연락 시도에도 불구하고 어떠한 회신도 없는 상황입니다.

4. 본인이 확인한 바에 따르면, 본인 외에도 다수의 피해자가 귀하에게 동일한 방식으로 피해를 입은 것으로 파악되며, 이는 귀하가 처음부터 피해자들을 기망하여 금원을 편취할 의도로 조직적 사기 행위를 한 것으로 판단됩니다.

5. 이에 본인은 귀하에게 아래와 같이 즉각적인 조치를 요구하며, 불응 시 민·형사상 모든 법적 수단을 동원할 것임을 통보합니다.`;

        legalBasis = '형법 제347조(사기죄)에 따르면 "사람을 기망하여 재물의 교부를 받거나 재산상의 이익을 취득한 자는 10년 이하의 징역 또는 2천만 원 이하의 벌금에 처한다"고 규정하고 있습니다. 또한 민법 제750조(불법행위)에 의거하여 손해배상 청구권이 발생합니다.';

        warning = `위 기한 내 피해금 전액 반환 및 사과가 없을 경우, 본인은 즉시 관할 경찰서에 사기죄로 형사고소를 진행할 것입니다. 형사처벌(전과 기록) 외에도 민사상 손해배상 소송을 제기하여 피해금 원금, 지연이자(연 12%), 소송비용, 변호사 선임료, 그리고 정신적 피해에 대한 위자료를 전액 청구할 것임을 엄중히 경고합니다.`;

        demands = [
            `피해금 ${money} 전액을 아래 계좌로 즉시 반환할 것`,
            '향후 동일한 피해가 발생하지 않도록 판매 게시물을 모두 삭제할 것',
            '서면 또는 구두로 피해자에게 진정성 있는 사과를 표할 것'
        ];
    }
    // ========================
    // 임대인 → 임차인 (명도/차임)
    // ========================
    else if (/집주인|임대인/.test(content) && /세입자|임차인/.test(content) && /안|못|밀려|연체|도망/.test(content)) {
        // 월세 횟수 추출
        const monthMatch = content.match(/(\d+)\s*개월|(\d+)\s*달/);
        const months = monthMatch ? monthMatch[0] : '수 개월';

        title = '임대차 계약 해지 통보 및 건물 명도(인도) 청구의 건';
        introduction = `본인(${senderName})은 귀하와 임대차 계약을 체결한 임대인입니다.`;

        body = `1. 귀하는 본 임대차 계약에 따라 매월 약정된 차임(월세)을 지급할 의무가 있음에도 불구하고, 현재까지 ${months} 치 차임 합계 ${money}을 지급하지 않고 있습니다.

2. 본인은 귀하에게 수차례에 걸쳐 연체 차임의 지급을 독촉하였으나, 귀하는 이를 무시하고 차임 지급 의무를 이행하지 않고 있습니다.

3. 민법 제640조에 따르면, 차임의 연체액이 2기(2개월)의 차임액에 달하는 경우 임대인은 계약을 해지할 수 있습니다. 귀하의 연체액은 이미 이 기준을 초과하였습니다.

4. 이에 본인은 본 서면을 통해 귀하와의 임대차 계약을 즉시 해지함을 통보하며, 아래 기한 내 건물을 원상회복하여 인도(명도)할 것을 요구합니다.

5. 아울러, 본 서면 도달일까지 발생한 연체 차임 전액을 즉시 지급할 것을 청구합니다.`;

        legalBasis = '민법 제640조(차임연체와 해지) 및 민법 제615조(차주의 원상회복의무), 민법 제654조(임대차의 해약통고)에 의거하여 계약 해지 및 건물 인도를 청구합니다.';

        warning = '위 기한 내 이행이 없을 경우, 본인은 즉시 점유이전금지가처분 및 건물명도소송을 제기할 것입니다. 이 경우 귀하는 연체 차임 원금은 물론, 미납 차임에 대한 지연손해금(연 12%), 소송비용, 변호사 보수, 그리고 명도 지연에 따른 차임 상당 손해배상까지 전부 부담하게 됨을 엄중히 경고합니다.';

        demands = [
            `연체 차임 ${money} 전액을 즉시 지급할 것`,
            '본 서면 도달일로부터 14일 이내 건물을 원상회복하여 인도할 것',
            '명도 시까지 발생하는 차임 상당액을 매월 지급할 것'
        ];
    }
    // ========================
    // 임차인 → 임대인 (보증금)
    // ========================
    else if (/세입자|전세|보증금/.test(content) && /안 돌려|못 받|안 줘|안 줌|반환|못 돌려|의무.*없|돌려줄.*의무|날아가|돌려.*않|만기|이사.*가야|집주인.*에게/.test(content)) {
        title = '임대차 보증금 반환 청구의 건';
        introduction = `본인(${senderName})은 귀하와 임대차 계약을 체결하였던 임차인입니다.`;

        body = `1. 본인과 귀하 사이의 임대차 계약은 적법하게 종료되었으며, 본인은 계약 만료일에 맞추어 해당 부동산을 귀하에게 인도하였습니다.

2. 그러나 귀하는 임대차 계약 종료 후 현재까지 임대차보증금 ${money}을 반환하지 않고 있습니다.

3. 본인은 귀하에게 수차례에 걸쳐 보증금 반환을 요청하였으나, 귀하는 정당한 사유 없이 반환을 거부하거나 차일피일 미루고 있는 상황입니다.

4. 주택임대차보호법 및 민법에 따르면, 임대인은 임대차 종료 시 지체 없이 보증금을 반환할 의무가 있으며, 이를 불이행할 경우 지연손해금이 발생합니다.

5. 이에 본인은 귀하에게 보증금 전액의 즉각적인 반환을 강력히 요구합니다.`;

        legalBasis = '주택임대차보호법 제3조의3(보증금의 회수), 민법 제536조(동시이행의 항변권), 민법 제548조(해제의 효과)에 의거하여 보증금 반환을 청구합니다.';

        warning = '위 기한 내 보증금 반환이 없을 경우, 본인은 즉시 임차권등기명령 신청 및 보증금 반환 소송을 제기할 것입니다. 이 경우 귀하는 보증금 원금은 물론, 지연손해금(연 12%), 소송비용, 변호사 보수까지 전액 부담하게 됨을 엄중히 경고합니다.';

        demands = [
            `임대차보증금 ${money} 전액을 아래 계좌로 즉시 반환할 것`,
            '보증금 반환 지연에 따른 지연손해금 지급',
            '향후 일정 및 반환 계획을 서면으로 통보할 것'
        ];
    }
    // ========================
    // 용역비 / 프리랜서 미지급
    // ========================
    else if (/프리랜서|외주|용역|잔금|외주비|제작비|디자인비|개발비/.test(content) && /미지급|안 줘|못 받|안 줌/.test(content)) {
        title = '용역비(대금) 지급 청구 및 법적 조치 예고의 건';
        introduction = `본인(${senderName})은 귀하와 용역(외주) 계약을 체결하고 약정된 업무를 완료한 용역제공자입니다.`;

        body = `1. 본인은 귀하와의 합의에 따라 용역(외주) 업무를 수행하였으며, 약정된 기한 내에 모든 작업물을 귀하에게 인도하고 귀하의 검수까지 완료하였습니다.

2. 그러나 귀하는 완성된 용역에 대한 대금 ${money}을 현재까지 지급하지 않고 있습니다.

3. 본인은 귀하에게 수차례에 걸쳐 용역비 지급을 요청하였으나, 귀하는 "퀄리티가 기대와 다르다", "자금 사정이 어렵다" 등의 이유를 들어 정당한 대금 지급을 회피하고 있습니다.

4. 참고로, 계약서가 별도로 작성되지 않았더라도 구두 합의 및 카카오톡 등 메신저 대화 내역만으로도 계약의 성립 및 이행 완료를 충분히 입증할 수 있음을 알려드립니다.

5. 이에 본인은 귀하에게 아래 기한 내 용역비 전액을 지급할 것을 최종 요구합니다.`;

        legalBasis = '민법 제664조(도급의 의의), 민법 제665조(수급인의 담보책임)에 의거하여 완성된 도급의 보수를 청구합니다. 또한 민법 제390조(채무불이행)에 따라 손해배상을 청구할 수 있습니다.';

        warning = '위 기한 내 용역비 지급이 없을 경우, 본인은 지체 없이 법원에 지급명령을 신청하거나 민사소송을 제기할 것입니다. 이 경우 귀하는 용역비 원금은 물론, 지연손해금(연 12%), 소송비용, 변호사 보수까지 전액 부담하게 됨을 경고합니다.';

        demands = [
            `용역비(잔금) ${money} 전액을 즉시 지급할 것`,
            '지급 일정을 3일 이내 서면으로 통보할 것',
            '향후 동일한 분쟁이 발생하지 않도록 정산 내역서를 작성할 것'
        ];
    }
    // ========================
    // 이혼/가정법 (배우자 도박, 외도, 재산분할 등) - 대여금보다 먼저!
    // ========================
    else if (/이혼|양육권|재산.*분할|위자료|친권|별거|혼인|배우자|남편|아내|도박.*빚|외도|불륜/.test(content)) {
        title = '이혼 의사 통보 및 위자료·재산분할 청구 예고의 건';
        introduction = `본인(${senderName})은 귀하의 배우자로서, 귀하의 유책행위로 인해 더 이상 혼인 생활을 유지할 수 없어 이혼을 결심하게 되었습니다.`;

        body = `1. 귀하는 혼인 기간 중 도박, 외도 등 배우자로서의 신의성실 의무를 저버리는 행위를 하였으며, 이로 인해 본인은 극심한 정신적 고통을 받았습니다.

2. 특히 귀하가 몰래 진 도박 빚으로 인해 채권자들이 가정에까지 찾아오는 상황이 발생하였고, 이는 본인과 자녀들의 안전과 평온한 생활을 심각하게 위협하고 있습니다.

3. 본인은 귀하에게 수차례 혼인 생활 유지를 위한 노력을 요청하였으나, 귀하는 이를 무시하거나 오히려 책임을 회피하였습니다.

4. 이에 본인은 불가피하게 이혼을 결심하였으며, 귀하에게 위자료 및 재산분할을 청구할 것임을 알립니다.`;

        legalBasis = '민법 제840조(재판상 이혼사유)에 따르면 배우자가 부정한 행위를 한 때, 배우자를 악의로 유기한 때, 배우자 또는 그 직계존속으로부터 심히 부당한 대우를 받은 때 등은 이혼 청구 사유가 됩니다. 민법 제843조 및 제839조의2에 따라 재산분할청구권 및 위자료 청구권이 인정됩니다.';

        warning = '본인은 귀하가 위 사안에 대해 성실히 협의에 응하지 않을 경우, 가정법원에 이혼소송을 제기하고, 위자료 및 재산분할을 법원을 통해 청구할 것입니다. 또한 자녀의 친권 및 양육권 역시 법원의 판단을 구할 것임을 통보합니다.';

        demands = [
            '이혼에 합의하고 협의이혼 절차에 응할 것',
            '재산분할에 대해 성실히 협의할 것 (부동산, 예금, 채무 등)',
            `위자료 ${money}을 지급할 것`,
            '자녀 양육권 및 양육비에 대해 협의할 것',
            '귀하 명의의 채무는 귀하가 책임질 것'
        ];
    }
    // ========================
    // 대여금 (지인에게 빌려준 돈) - 이혼 케이스 제외 추가
    // ========================
    else if (/빌려|빌린|대여|차용|갚|상환|돈.*안|돈.*못/.test(content) && !/전세|보증금|월세|이혼|남편|아내|배우자/.test(content)) {
        title = '대여금 반환 청구 및 법적 조치 예고의 건';
        introduction = `본인(${senderName})은 귀하에게 금전을 대여한 채권자입니다. 본인은 귀하와의 신뢰 관계를 바탕으로 금원을 대여하였으나, 귀하가 약정된 변제 기일을 도과하고도 이를 이행하지 아니하므로 부득이 본 내용증명을 발송하는 바입니다.`;

        body = `1. 본인은 귀하의 간곡한 요청에 따라 금 ${money}을 대여하였습니다. 당시 귀하는 급히 자금이 필요하다며 본인에게 도움을 요청하였고, 본인은 귀하와의 신뢰 관계를 고려하여 위 금원을 대여하였습니다.

2. 귀하는 대여 당시 약정된 기일까지 위 대여금 전액을 상환하기로 명확히 약속하였습니다. 해당 약속은 구두 또는 서면(차용증, 문자메시지, 카카오톡 대화 등)으로 이루어진 바, 이는 법적으로 유효한 금전소비대차 계약에 해당합니다.

3. 그러나 귀하는 약정된 변제 기일이 상당 기간 경과하였음에도 불구하고, 현재까지 대여금의 원금은 물론 일부 금액조차 상환하지 아니하고 있습니다. 이는 명백한 계약 불이행에 해당합니다.

4. 본인은 귀하에게 전화, 문자메시지, 메신저 등을 통해 수차례에 걸쳐 상환을 독촉하였습니다. 그러나 귀하는 "조금만 더 기다려 달라", "곧 갚겠다"는 등의 변명만을 반복하며 실질적인 변제 행위를 하지 않고 있습니다.

5. 최근에는 본인의 연락에 대한 회신조차 지연되거나 회피하는 양상을 보이고 있어, 귀하의 변제 의사 자체에 대해 심각한 의문이 제기되는 상황입니다.

6. 귀하의 위와 같은 행위는 민법상 채무불이행에 해당하며, 변제기가 도래한 채무를 정당한 사유 없이 이행하지 아니하는 것은 이행지체에 따른 손해배상 책임을 발생시킵니다. 나아가 변제 의사 없이 금원을 차용한 것으로 판명될 경우, 형법상 사기죄의 구성요건에도 해당할 수 있음을 지적합니다.

7. 본인은 그간 귀하와의 관계를 고려하여 법적 조치를 자제하여 왔으나, 귀하의 지속적인 불성실한 태도로 인해 더 이상 법적 조치를 미룰 수 없는 상황에 이르렀습니다. 이에 귀하에게 최종적으로 아래 기한 내 대여금 전액의 반환을 요구합니다.

8. 본 내용증명은 귀하에 대한 채권의 존재 및 이행 청구 사실을 공식적으로 통지하는 것이며, 향후 소송 절차에서 증거자료로 활용될 것임을 알려드립니다.`;

        legalBasis = '민법 제598조(소비대차의 의의)에 따르면 소비대차는 당사자 일방이 금전 기타 대체물의 소유권을 상대방에게 이전할 것을 약정하고 상대방은 그와 같은 종류, 품질 및 수량으로 반환할 것을 약정함으로써 그 효력이 생깁니다. 민법 제387조(이행기와 이행지체)에 따르면 채무이행의 확정기한이 있는 경우에는 기한이 도래한 때로부터 지체책임이 있습니다. 또한 민법 제397조(금전채무불이행에 대한 특칙)에 의거하여 금전채무의 불이행에 대한 손해배상액은 법정이율에 의하며, 소송촉진 등에 관한 특례법 제3조에 따라 연 12%의 지연손해금이 발생합니다.';

        warning = `위 기한 내 대여금 반환이 없을 경우, 본인은 다음과 같은 법적 조치를 즉시 취할 것입니다. 첫째, 법원에 지급명령을 신청하여 강제집행권을 확보하겠습니다(3,000만 원 이하 소액사건의 경우 독촉절차 가능). 둘째, 지급명령에 이의가 있을 경우 민사본안소송으로 이행하여 원금 ${money}, 지연손해금(연 12%), 소송비용, 변호사 보수를 전액 청구하겠습니다. 셋째, 판결 확정 후 귀하의 예금채권, 급여채권, 부동산 등에 대한 강제집행을 신청할 것입니다. 넷째, 귀하가 처음부터 변제 의사 없이 금원을 차용한 것으로 판명될 경우, 형법 제347조(사기죄)로 형사고소를 진행할 것이며, 이 경우 귀하는 10년 이하의 징역 또는 2천만 원 이하의 벌금에 처해질 수 있습니다.`;

        demands = [
            `대여금 ${money} 전액을 본 서면 도달일로부터 7일 이내에 반환할 것`,
            '반환 일정 및 방법(계좌이체 등)을 3일 이내 서면으로 통보할 것',
            '일시 상환이 어려울 경우, 구체적인 분할 상환 계획서를 서면으로 제출할 것 (분할 횟수, 각 회차 금액, 최종 완제일 명시)',
            '지연 기간에 대한 지연손해금(연 12%)을 원금과 함께 지급할 것',
            '향후 변제 약속 불이행 시 별도 최고 없이 법적 절차에 착수함에 동의할 것'
        ];
    }
    // ========================
    // 렌터카 과다 수리비/휴차료 분쟁
    // ========================
    else if (/렌터카|렌트카|렌탈|휴차료|대차료|반납/.test(content) && /수리비|과도|과다|현금|막무가내|사기/.test(content)) {
        title = '렌터카 과다 수리비 청구 이의제기 및 정당한 정산 요청의 건';
        introduction = `본인(${senderName})은 귀 업체에서 렌터카를 대여한 소비자입니다.`;

        body = `1. 본인은 귀 업체에서 차량을 대여하여 이용한 후 반납하였으며, 반납 시 차량에 경미한 손상이 있었던 사실은 인정합니다.

2. 그러나 귀 업체가 본인에게 청구한 수리비 및 휴차료 ${money}은 실제 손상 정도에 비해 현저히 과다한 금액으로 판단됩니다.

3. 본인이 자동차 수리 전문 업체에 별도로 확인한 결과, 동일한 손상에 대한 수리비 견적은 귀 업체 청구액의 절반에도 미치지 않았습니다.

4. 또한 귀 업체는 보험 처리를 거부하고 현금 지급만을 강요하고 있는데, 이는 소비자의 정당한 권리를 침해하는 것입니다.

5. 이에 본인은 적정한 수리비 산정 및 보험 처리를 요구합니다.`;

        legalBasis = '소비자기본법 제4조(소비자의 기본적 권리), 약관규제법 제6조(불공정 약관 무효)에 의거하여 과다 청구에 대한 이의를 제기합니다. 렌터카 표준약관에 따르면 손해배상액은 실제 손해액을 기준으로 산정해야 합니다.';

        warning = '귀 업체가 합리적인 수리비 재산정 및 보험 처리에 응하지 않을 경우, 본인은 한국소비자원에 피해구제를 신청하고, 공정거래위원회에 불공정 거래행위로 신고할 것입니다. 또한 필요시 민사소송을 통해 부당이득 반환을 청구할 것임을 통보합니다.';

        demands = [
            '수리비 견적의 상세 내역 및 근거 자료 제출',
            '타 정비업체 견적과 비교하여 적정 금액으로 재산정',
            '자차 보험 또는 신용카드 부가보험 처리 허용',
            '휴차료 산정 근거 및 적정성 소명',
            '부당한 현금 강요 행위 중단'
        ];
    }
    // ========================
    // 층간소음 경고
    // ========================
    else if (/층간소음|윗집|아랫집|쿵쿵|발소리|소음|시끄러|뛰어다니/.test(content)) {
        title = '층간소음 중단 요청 및 손해배상 예고의 건';
        introduction = `본인(${senderName})은 귀하의 세대에서 발생하는 심각한 소음으로 인해 일상생활에 중대한 피해를 입고 있는 주민입니다.`;

        body = `1. 본인은 귀하의 세대 아래(또는 인접) 층에 거주하는 주민으로서, 귀하의 세대에서 발생하는 극심한 생활소음으로 인해 정상적인 주거생활이 불가능한 상태에 이르렀음을 통보합니다.

2. 귀하의 세대에서 발생하는 소음은 쿵쿵거리는 발소리, 뛰어다니는 소리, 물건을 세게 내려놓는 소리, 가구를 끄는 소리 등 다양한 형태로 본인 세대에 전달되고 있습니다. 해당 소음은 단순한 생활소음의 범위를 넘어 수인한도를 초과하는 수준입니다.

3. 특히 야간 시간대(22시~08시) 및 이른 아침(06시~07시)에도 동일한 소음이 반복적으로 발생하여, 본인과 가족 구성원의 수면권이 심각하게 침해되고 있습니다. 이로 인해 본인은 만성 수면 부족, 두통, 불안감 등 건강상의 문제를 겪고 있습니다.

4. 본인은 그간 관리사무소를 통해 3회 이상 층간소음 민원을 접수하였고, 관리사무소는 귀하에게 주의를 요청한 바 있습니다. 그러나 귀하는 이를 무시하고 동일한 소음을 지속적으로 발생시키고 있습니다.

5. 또한 본인은 직접 방문하여 정중하게 소음 저감을 요청하였으나, 귀하는 "아이가 있어서 어쩔 수 없다", "우리도 조심하고 있다" 등의 변명만을 반복할 뿐 실질적인 개선 조치(층간매트 설치, 실내 슬리퍼 착용 등)를 취하지 않고 있습니다.

6. 『주거생활 소음·진동 관리기준』(국토교통부 고시)에 따르면 직접충격소음은 주간 43dB, 야간 38dB 이하로 관리되어야 합니다. 귀하의 세대에서 발생하는 소음은 이 기준을 상시적으로 초과하고 있는 것으로 판단됩니다.

7. 이에 본인은 귀하에게 즉각적인 소음 저감 조치 및 재발 방지를 요구하며, 불응 시 법적 절차를 진행할 것임을 최종 통보합니다.`;

        legalBasis = '민법 제217조(매연 등에 의한 인지의 금지)에 따르면 토지소유자는 매연, 열기체, 액체, 음향, 진동 기타 이에 유사한 것으로 이웃 토지의 사용을 방해하거나 이웃 거주자의 생활에 고통을 주어서는 안 됩니다. 공동주택관리법 제20조 및 동법 시행령 제19조(층간소음 관리)에 의거하여 공동주택의 입주자는 층간소음을 발생시키지 아니하도록 노력하여야 합니다. 또한 민법 제750조(불법행위)에 따라 수인한도를 초과하는 소음으로 인한 피해에 대해 손해배상을 청구할 수 있으며, 대법원은 층간소음이 수인한도를 초과하는 경우 위자료 배상을 인정하고 있습니다(대법원 2015다23378 판결 참조).';

        warning = '귀하가 본 요구에 응하지 않을 경우, 본인은 다음과 같은 법적 조치를 취할 것입니다. 첫째, 국가소음정보시스템 및 환경분쟁조정위원회에 정식 민원 및 분쟁조정을 신청하겠습니다. 둘째, 소음측정 전문기관을 통해 소음도를 공식 측정하여 증거를 확보하겠습니다. 셋째, 민사법원에 소음유지청구(금지청구) 및 손해배상(위자료) 청구 소송을 제기하겠습니다. 관련 판례에 따르면 층간소음 피해에 대해 1인당 300만 원~1,000만 원의 위자료가 인정된 사례가 있습니다.';

        demands = [
            '즉시 층간소음 유발 행위를 중단하고, 바닥재 보강(층간매트, 방음패드 등) 조치를 취할 것',
            '실내에서 슬리퍼 착용 등 기본적인 소음 저감 노력을 이행할 것',
            '야간 시간대(22시~08시) 및 이른 아침 시간대에 특히 주의하여 소음을 최소화할 것',
            '아동이 있는 경우 뛰어다니지 않도록 보호자로서의 관리·감독 의무를 이행할 것',
            '본 서면 수령 후 7일 이내에 소음 저감 조치 이행 계획을 서면으로 통보할 것'
        ];
    }
    // ========================
    // 폭행/협박 경고
    // ========================
    else if (/폭행|때리|맞|주먹|멱살|몸싸움|시비|싸움|전치|상해|진단.*주|쌍방/.test(content)) {
        title = '폭행/상해 행위에 대한 치료비 청구 및 형사고소 예고의 건';
        introduction = `본인(${senderName})은 귀하로부터 폭행을 당하여 신체적 피해를 입은 피해자입니다.`;

        body = `1. 귀하는 본인에게 주먹 또는 신체를 이용하여 일방적으로 폭력을 행사하였습니다. 해당 폭행으로 인해 본인은 안면부 타박상, 경추 염좌 등의 상해를 입었으며, 현재 병원에서 치료 중에 있습니다.

2. 당시 상황에서 본인은 귀하를 자극하거나 먼저 폭력을 행사한 사실이 전혀 없으며, 귀하의 일방적이고 돌발적인 폭행으로 인해 피해를 입은 것입니다.

3. 본인은 사건 직후 병원에서 진단서를 발급받았으며, 전치 수 주의 상해로 진단받았습니다. 현재까지 발생한 치료비만 해도 상당한 금액에 달하며, 향후 추가 치료가 필요한 상황입니다.

4. 귀하는 "쌍방폭행이다", "네가 먼저 시비를 걸었다" 등의 주장을 하고 있으나, 이는 사실과 전혀 다릅니다. 현장 CCTV 영상, 목격자 진술, 본인의 진단서 등 객관적 증거에 의해 귀하의 일방적인 폭행 사실이 명백히 입증될 수 있습니다.

5. 본인은 사건 이후 극심한 정신적 충격을 받아 수면 장애, 외출 공포, 대인기피 증상을 겪고 있으며, 이로 인해 정상적인 일상생활 및 직장 생활에 심각한 지장을 받고 있습니다.

6. 귀하의 행위는 형법상 폭행죄 및 상해죄에 해당하는 명백한 범죄행위이며, 본인에 대한 불법행위로서 민법상 손해배상 책임이 발생합니다.

7. 이에 본인은 귀하에게 진정성 있는 사과와 함께 치료비 전액 및 정신적 피해에 대한 배상을 요구합니다. 불응 시 형사·민사상 모든 법적 조치를 취할 것임을 최종 통보합니다.`;

        legalBasis = '형법 제260조(폭행죄)에 따르면 사람의 신체에 대하여 폭행을 가한 자는 2년 이하의 징역, 500만 원 이하의 벌금, 구류 또는 과료에 처합니다. 형법 제257조(상해죄)에 따르면 사람의 신체를 상해한 자는 7년 이하의 징역, 10년 이하의 자격정지 또는 1천만 원 이하의 벌금에 처합니다. 또한 민법 제750조(불법행위의 내용) 및 제751조(재산 이외의 손해의 배상)에 의거하여 귀하는 본인의 치료비, 일실수입, 정신적 피해에 대한 위자료를 배상할 의무가 있습니다.';

        warning = '귀하가 본 요구에 응하지 않을 경우, 본인은 다음 법적 조치를 즉시 진행할 것입니다. 첫째, 관할 경찰서에 폭행죄 및 상해죄로 형사고소장을 접수하겠습니다(형사처벌 시 전과기록이 남습니다). 둘째, 민사소송을 통해 기 발생 치료비 전액, 향후 치료비, 치료 기간 동안의 일실수입(휴업손해), 정신적 피해에 대한 위자료를 전액 청구하겠습니다. 셋째, 귀하의 재산에 대한 가압류를 신청하여 배상금 확보를 위한 보전처분을 진행하겠습니다.';

        demands = [
            '본인에게 진정성 있는 사과를 표할 것',
            '치료비 전액 및 향후 치료비를 배상할 것',
            '정신적 피해에 대한 위자료를 지급할 것',
            '향후 본인에 대한 어떠한 폭력 행위도 중단할 것'
        ];
    }
    // ========================
    // 공사/수리 하자
    // ========================
    else if (/인테리어|공사|시공|하자|수리|리모델링|누수|균열|부실/.test(content)) {
        title = '공사 하자 보수 청구 및 손해배상 예고의 건';
        introduction = `본인(${senderName})은 귀하(귀사)에게 공사를 의뢰한 발주자입니다.`;

        body = `1. 본인은 귀하(귀사)에게 인테리어 공사(또는 수리 공사)를 의뢰하고, 약정된 공사비 ${money}을 정상적으로 지급하였습니다. 귀하는 공사 착수 전 본인에게 시공 품질을 보장하고 하자 발생 시 무상 보수하겠다고 약속하였습니다.

2. 그러나 공사 완료 후 본인이 현장을 확인한 결과, 시공 불량, 마감 불량, 누수, 균열, 자재 불량 등 다수의 심각한 하자가 발견되었습니다. 이는 귀하가 약속한 시공 품질에 현저히 미달하는 것입니다.

3. 구체적으로 발견된 하자 내역은 다음과 같습니다: 바닥재 들뜸 및 갈라짐, 벽면 도장 불량 및 얼룩, 욕실 방수 처리 미흡으로 인한 누수, 전기/설비 배선 불량 등이 확인되었습니다.

4. 본인은 하자를 발견한 즉시 귀하에게 전화 및 문자메시지로 하자 보수를 요청하였습니다. 그러나 귀하는 "바빠서 나중에 하겠다", "큰 문제가 아니다" 등의 변명만을 반복하며 수차례의 보수 요청에도 실질적인 조치를 취하지 않고 있습니다.

5. 위 하자들은 시간이 지남에 따라 더욱 악화되고 있으며, 본인은 누수로 인한 곰팡이 발생, 전기 합선 위험 등 안전상의 문제까지 우려되는 상황입니다. 하자 방치로 인한 2차 피해가 발생할 경우, 이에 대한 책임 역시 귀하에게 있음을 지적합니다.

6. 본인이 별도의 전문 업체에 견적을 의뢰한 결과, 하자 보수에 상당한 비용이 추가로 소요될 것으로 확인되었습니다. 이는 귀하의 부실 시공으로 인해 발생한 추가 비용이므로 전액 귀하가 부담하여야 합니다.

7. 이에 본인은 귀하에게 아래 기한 내 모든 하자를 완전히 보수하고, 불가능할 경우 상응하는 금액의 손해배상을 이행할 것을 최종 요구합니다.`;

        legalBasis = '민법 제667조(수급인의 담보책임)에 따르면 완성된 목적물 또는 완성 전의 성취된 부분에 하자가 있는 때에는 도급인은 수급인에 대하여 상당한 기간을 정하여 그 하자의 보수를 청구할 수 있습니다. 민법 제668조(하자보수와 손해배상의 청구)에 의거하여 하자 보수에 갈음하거나 보수와 함께 손해배상을 청구할 수 있습니다. 또한 소비자기본법 제4조(소비자의 기본적 권리)에 따라 소비자는 물품 등의 사용으로 인한 피해에 대하여 신속·공정한 절차에 따라 적절한 보상을 받을 권리가 있습니다.';

        warning = '위 기한 내 하자 보수가 완료되지 않거나 성실한 협의가 이루어지지 않을 경우, 본인은 다음과 같은 법적 조치를 취할 것입니다. 첫째, 제3의 전문 업체에 하자 보수를 의뢰하고 그 비용 전액을 귀하에게 구상 청구하겠습니다. 둘째, 민사소송을 통해 하자 보수 비용, 추가 손해(누수로 인한 가재도구 훼손 등), 이사 비용, 정신적 피해에 대한 위자료를 청구하겠습니다. 셋째, 한국소비자원에 피해구제를 신청하여 공적 구제 절차를 진행하겠습니다.';

        demands = [
            '발견된 모든 하자 부분을 완전히 보수할 것 (하자 목록 별첨)',
            '보수 착수 일정을 5일 이내 서면으로 통보할 것',
            '보수 완료 후 1년간 하자 재발 시 무상 보수를 보증할 것',
            '보수 불가능 시 하자 보수 상당 금액 및 추가 손해를 배상할 것',
            '누수 등 긴급 하자는 본 서면 수령 후 3일 이내 우선 보수할 것'
        ];
    }
    // ========================
    // 로맨스 스캠 / 투자 유인 사기 (SNS 만남 + 코인/투자 + 입금)
    // ========================
    else if (/인스타|SNS|페이스북|카카오|텔레그램|소개팅|채팅/.test(content) && /코인|거래소|투자|수익|출금|입금|자금|해외.*계좌|비트코인/.test(content) && /사기|피해|돈.*날|못.*받|세금.*입금|추가.*입금|동결|묶여|느낌.*쎄|수상|의심/.test(content)) {
        title = '투자 사기(로맨스 스캠) 피해에 따른 피해금 반환 청구 및 형사고소 예고의 건';
        introduction = `본인(${senderName})은 귀하의 기망행위에 의하여 심각한 재산 피해를 입은 피해자입니다.`;

        body = `1. 귀하는 인터넷 소셜미디어(SNS)를 통해 본인에게 접근하여, 장기간에 걸쳐 허위의 신분(해외 사업가, 교포 등)을 사칭하며 본인의 신뢰를 얻었습니다.

2. 귀하는 본인과의 관계가 깊어진 이후, 해외 코인 거래소 또는 투자 사이트를 소개하며 "자금을 불려주겠다"는 허위 약속으로 투자를 권유하였고, 본인은 귀하를 신뢰하여 합계 ${money}을 해당 거래소에 입금하였습니다.

3. 해당 거래소 사이트에는 허위의 수익률이 표시되어 있었으며, 본인이 출금을 요청하자 "자금세탁방지법에 따른 세금", "수수료", "보증금" 등의 명목으로 추가 입금을 요구하고 있습니다. 이는 전형적인 2차 사기 수법입니다.

4. 귀하는 본인의 추가 입금 요청에 대해 "해외 계좌가 묶여서 대신 입금해달라", "한국에 가서 갚겠다" 등 변명만을 반복하고 있으며, 이는 귀하가 처음부터 본인을 기망하여 금원을 편취할 의도로 조직적으로 범행한 것으로 판단됩니다.

5. 이에 본인은 귀하에게 피해금 전액의 즉각적인 반환을 요구하며, 불응 시 민·형사상 모든 법적 수단을 동원할 것임을 엄중히 통보합니다.`;

        legalBasis = '형법 제347조(사기죄)에 따르면 사람을 기망하여 재물의 교부를 받거나 재산상의 이익을 취득한 자는 10년 이하의 징역 또는 2천만 원 이하의 벌금에 처합니다. 특정경제범죄 가중처벌 등에 관한 법률 제3조에 따르면 이득액이 5억 원 이상인 경우 3년 이상의 유기징역에 처합니다. 또한 전자금융거래법 위반 및 민법 제750조(불법행위)에 의거하여 손해배상 청구권이 발생합니다.';

        warning = `위 기한 내 피해금 전액 반환이 없을 경우, 본인은 즉시 경찰 사이버수사대에 사기죄로 형사고소를 진행하고, 금융감독원에 불법 금융 사기로 신고할 것입니다. 또한 귀하의 재산에 대한 가압류를 신청하여 재산 은닉을 방지하고, 민사소송을 통해 피해금 원금 ${money}, 지연이자(연 12%), 정신적 피해에 대한 위자료를 전액 청구할 것임을 엄중히 경고합니다.`;

        demands = [
            `피해금 ${money} 전액을 즉시 반환할 것`,
            '반환 일정을 3일 이내 서면으로 통보할 것',
            '해외 코인 거래소로부터 원금 회수에 적극 협조할 것',
            '향후 본인 및 타인에 대한 동일 범행을 즉시 중단할 것'
        ];
    }
    // ========================
    // 명예훼손 / 모욕 (온라인/오프라인) - 인스타/SNS 단독 매칭 제외 (로맨스스캠 충돌 방지)
    // ========================
    else if (/욕|악플|명예훼손|모욕|비방|걸레|패드립|사기꾼이다|인격|인신공격/.test(content) || (/SNS|인스타|게시물|댓글/.test(content) && /욕|비방|모욕|명예훼손|허위/.test(content))) {
        title = '명예훼손·모욕 행위 중단 요청 및 형사고소 예고의 건';
        introduction = `본인(${senderName})은 귀하의 위법한 명예훼손 및 모욕 행위로 인해 심각한 정신적·사회적 피해를 입은 피해자입니다.`;

        body = `1. 귀하는 온라인상에서 본인의 실명(또는 특정 가능한 정보)을 거론하며, 본인을 비방하는 허위 사실 또는 모욕적인 표현을 불특정 다수가 볼 수 있는 공간에 게시하였습니다.

2. 귀하가 사용한 표현("사기꾼", "부모 욕설" 등)은 본인의 명예를 심각하게 훼손하고, 인격권을 침해하는 것으로서, 형법상 명예훼손죄 및 모욕죄에 해당합니다.

3. 본인은 해당 게시물로 인해 극심한 정신적 고통을 겪고 있으며, 수면 장애 및 일상생활에 심각한 지장을 받고 있습니다.

4. 이에 본인은 귀하에게 해당 게시물의 즉각적인 삭제 및 공개 사과를 요구합니다.`;

        legalBasis = '형법 제307조(명예훼손)에 따르면 공연히 사실 또는 허위사실을 적시하여 사람의 명예를 훼손한 자는 2년 이하의 징역이나 500만 원 이하의 벌금에 처합니다. 형법 제311조(모욕)에 따르면 공연히 사람을 모욕한 자는 1년 이하의 징역이나 200만 원 이하의 벌금에 처합니다. 정보통신망법 제70조에 따라 온라인 명예훼손은 가중처벌될 수 있습니다.';

        warning = '위 요구에 응하지 않을 경우, 본인은 즉시 경찰 사이버수사대에 명예훼손죄 및 모욕죄로 형사고소를 진행할 것입니다. 또한 민사상 손해배상 소송을 제기하여 정신적 피해에 대한 위자료 및 치료비를 청구할 것임을 엄중히 경고합니다.';

        demands = [
            '해당 게시물(댓글 포함)을 즉시 삭제할 것',
            '본인에게 서면 또는 공개적으로 진정성 있는 사과를 표할 것',
            '향후 본인에 대한 어떠한 비방·모욕 행위도 중단할 것',
            '정신적 피해에 대한 위자료 지급'
        ];
    }
    // ========================
    // 의료과실 / 의료분쟁
    // ========================
    else if (/병원|의사|수술|치료|오진|의료.*과실|부작용|후유증|사망|진료/.test(content) && /사고|피해|실수|잘못|과실|고소/.test(content)) {
        title = '의료과실에 대한 손해배상 및 책임 인정 요구의 건';
        introduction = `본인(${senderName})은 귀 의료기관에서 진료(수술)를 받은 후 심각한 피해를 입은 환자입니다.`;

        body = `1. 본인은 귀 의료기관에서 진료(수술)를 받은 환자로서, 해당 의료행위 과정에서 의료진의 주의의무 위반으로 인해 예상치 못한 심각한 후유증 및 손해가 발생하였습니다.

2. 본인은 해당 진료(수술)를 받기 전, 시술의 위험성, 부작용, 대안적 치료 방법 등에 대한 충분한 설명을 듣지 못하였습니다. 이는 의료법 제24조의2에 규정된 설명의무를 위반한 것에 해당합니다.

3. 의료행위 후 본인에게 발생한 증상(후유증, 합병증 등)은 통상적인 의료행위에서는 발생하지 않아야 할 결과로서, 이는 의료진이 해당 분야의 전문가로서 갖추어야 할 주의의무를 다하지 못한 과실에 의한 것으로 판단됩니다.

4. 본인은 현재까지 상당한 추가 치료비를 부담하고 있으며, 후유증으로 인해 정상적인 일상생활 및 직업 활동에 심각한 지장을 받고 있습니다. 또한 정신적으로도 극심한 고통과 불안을 겪고 있습니다.

5. 본인은 귀 의료기관에 수차례에 걸쳐 의료과실에 대한 설명과 책임 있는 조치를 요청하였으나, 귀 의료기관은 과실을 부인하거나 성의 있는 답변을 제공하지 않고 있습니다.

6. 이에 본인은 귀 의료기관에 의료과실에 대한 책임 인정, 진료기록 전면 공개, 그리고 적정한 손해배상을 요구합니다. 불응 시 의료분쟁조정중재원 및 법원을 통한 법적 절차를 진행할 것임을 통보합니다.`;

        legalBasis = '의료법 제24조(요양방법 등 지도), 민법 제750조(불법행위의 내용)에 의거하여 의료과실로 인한 손해배상을 청구합니다.';

        warning = '귀 의료기관이 본 요구에 응하지 않을 경우, 본인은 한국의료분쟁조정중재원에 조정을 신청하고, 필요시 민형사상 소송을 제기할 것입니다.';

        demands = [
            '진료기록부 전체 사본 제공',
            '의료과실에 대한 책임 인정',
            '치료비 및 위자료 등 손해배상 협의'
        ];
    }
    // ========================
    // 직장 내 괴롭힘 / 갑질
    // ========================
    else if (/직장|회사|상사|팀장|부장|갑질|괴롭힘|왕따|따돌림|폭언|모욕|퇴사.*강요/.test(content)) {
        title = '직장 내 괴롭힘 행위 중단 요청 및 법적 조치 예고의 건';
        introduction = `본인(${senderName})은 귀사에 재직 중인 근로자로서, 직장 내 괴롭힘으로 인해 심각한 정신적·신체적 피해를 입고 있습니다.`;

        body = `1. 본인은 귀사에서 근무하면서 (가해자명 또는 직급)으로부터 지속적인 폭언, 모욕, 업무 배제, 따돌림 등 직장 내 괴롭힘 행위를 당하고 있습니다.

2. 이러한 행위는 근로기준법에서 금지하는 직장 내 괴롭힘에 해당하며, 본인의 인격권과 노동권을 심각하게 침해하고 있습니다.

3. 본인은 이로 인해 우울증, 불안장애 등 정신적 질환이 발생하였으며, 정상적인 근무가 어려운 상황입니다.

4. 이에 본인은 귀사에 괴롭힘 행위의 즉각적인 중단 및 적절한 조치를 요구합니다.`;

        legalBasis = '근로기준법 제76조의2(직장 내 괴롭힘의 금지), 제76조의3(직장 내 괴롭힘 발생 시 조치)에 의거하여 사용자는 직장 내 괴롭힘 발생 사실을 인지한 경우 지체 없이 조사하고 적절한 조치를 취할 의무가 있습니다.';

        warning = '귀사가 본 요구에 응하지 않을 경우, 본인은 고용노동부에 진정을 제기하고, 산업재해 인정 신청 및 민사상 손해배상 청구를 진행할 것입니다.';

        demands = [
            '가해자의 괴롭힘 행위 즉시 중단 요구',
            '가해자에 대한 징계 또는 분리 조치',
            '피해 회복을 위한 근무환경 개선',
            '정신적 피해에 대한 위자료 지급 협의'
        ];
    }
    // ========================
    // 부당해고 / 불법해고
    // ========================
    else if (/해고|짤|퇴직.*강요|권고사직|부당.*해고|계약.*해지|정리해고/.test(content)) {
        title = '부당해고에 대한 해고예고수당 청구 및 구제 예고의 건';
        introduction = `본인(${senderName})은 귀사에서 부당하게 해고된 근로자입니다.`;

        body = `1. 귀사는 정당한 사유 없이 본인을 해고하였으며, 이는 근로기준법상 부당해고에 해당합니다.

2. 해고 과정에서 적법한 해고 절차(서면 통보, 해고 사유 명시)가 준수되지 않았습니다.

3. 이에 본인은 귀사에 해고무효 확인 및 해고예고수당 지급을 요구합니다.`;

        legalBasis = '근로기준법 제23조(해고 등의 제한), 제26조(해고의 예고), 제27조(해고사유 등의 서면통지)에 의거하여 정당한 이유 없는 해고는 무효입니다.';

        warning = '귀사가 본 요구에 응하지 않을 경우, 본인은 3개월 내에 노동위원회에 부당해고 구제신청을 하고, 필요시 법원에 해고무효 확인소송을 제기할 것입니다.';

        demands = [
            '해고 철회 및 복직',
            '해고 기간 동안의 임금 지급',
            '해고예고수당 지급(30일분 통상임금)',
            '부당해고로 인한 정신적 피해 배상'
        ];
    }
    // ========================
    // 저작권 / 지식재산권 침해
    // ========================
    else if (/저작권|도용|표절|무단.*사용|불법.*복제|디자인.*도용|상표|특허/.test(content)) {
        title = '저작권 침해에 대한 즉각 중지 요청 및 손해배상 예고의 건';
        introduction = `본인(${senderName})은 해당 저작물(디자인/콘텐츠)의 정당한 권리자입니다.`;

        body = `1. 귀하(귀사)는 본인의 허락 없이 본인의 저작물(디자인/콘텐츠)을 무단으로 복제, 배포, 사용하고 있습니다.

2. 이는 저작권법에서 금지하는 저작권 침해 행위에 해당합니다.

3. 이에 본인은 귀하에게 즉각적인 침해 행위 중단 및 손해배상을 요구합니다.`;

        legalBasis = '저작권법 제136조(권리의 침해죄)에 의거하여 저작재산권 등을 침해한 자는 5년 이하의 징역 또는 5천만 원 이하의 벌금에 처합니다. 제125조에 따라 손해배상을 청구할 수 있습니다.';

        warning = '귀하가 본 요구에 응하지 않을 경우, 본인은 한국저작권위원회에 조정을 신청하고, 형사고소 및 민사 손해배상 소송을 진행할 것입니다.';

        demands = [
            '침해 저작물의 즉각적인 사용 중지 및 삭제',
            '더 이상의 복제·배포 행위 중단',
            '손해배상금 지급',
            '서면 사과문 제출'
        ];
    }
    // ========================
    // 학교폭력 / 왕따
    // ========================
    else if (/학교.*폭력|학폭|왕따|따돌림|학생.*괴롭힘|선생님|교사|학교/.test(content) && /폭행|협박|욕|괴롭|피해/.test(content)) {
        title = '학교폭력 피해에 대한 진정 및 손해배상 청구 예고의 건';
        introduction = `본인(${senderName})은 학교폭력 피해 학생의 법정대리인(보호자)입니다.`;

        body = `1. 본인의 자녀는 귀하의 자녀로부터 지속적인 폭행, 협박, 따돌림 등 학교폭력을 당하였습니다.

2. 이로 인해 본인의 자녀는 심각한 정신적 트라우마를 겪고 있으며, 정상적인 학교생활이 불가능한 상태입니다.

3. 이에 본인은 귀하에게 가해 학생의 즉각적인 사과 및 재발 방지 조치, 그리고 피해에 대한 배상을 요구합니다.`;

        legalBasis = '학교폭력예방법 제2조(정의), 민법 제750조(불법행위 손해배상), 제755조(감독자의 책임)에 의거하여 가해 학생의 보호자에게 손해배상 책임이 있습니다.';

        warning = '귀하가 본 요구에 응하지 않을 경우, 본인은 학교폭력대책심의위원회에 신고하고, 경찰에 형사고소하며, 민사 손해배상 소송을 제기할 것입니다.';

        demands = [
            '가해 학생의 진정성 있는 사과',
            '향후 접근 및 연락 금지',
            '치료비 및 정신적 피해에 대한 위자료 지급',
            '재발 방지 서약'
        ];
    }
    // ========================
    // 보험금 거부 / 보험 분쟁
    // ========================
    else if (/보험|보험금|거부|거절|지급.*안|보험.*사기|약관|면책/.test(content) && !/교통사고/.test(content)) {
        title = '보험금 지급 청구 및 부당 거부에 대한 이의제기의 건';
        introduction = `본인(${senderName})은 귀 보험회사와 보험계약을 체결한 정당한 보험계약자입니다.`;

        body = `1. 본인은 보험계약에 따라 보험사고 발생 시 보험금을 지급받을 권리가 있습니다.

2. 그러나 귀사는 정당한 사유 없이 보험금 지급을 거부하고 있습니다.

3. 귀사가 주장하는 면책사유는 본 건에 적용되지 않으며, 약관 해석상으로도 보험금 지급 사유에 해당합니다.

4. 이에 본인은 귀사에 보험금 즉시 지급을 요구합니다.`;

        legalBasis = '상법 제638조(손해보험계약의 의의), 보험업법 제95조의 5(보험금 등 지급)에 의거하여 보험회사는 정당한 사유 없이 보험금 지급을 거부할 수 없습니다.';

        warning = '귀사가 본 요구에 응하지 않을 경우, 본인은 금융감독원에 민원을 제기하고, 금융분쟁조정위원회에 조정을 신청하며, 필요시 보험금 청구 소송을 제기할 것입니다.';

        demands = [
            `보험금 ${money} 즉시 지급`,
            '거부 사유에 대한 상세 서면 소명',
            '지급 지연에 따른 지연이자 지급'
        ];
    }
    // ========================
    // 헬스장/피트니스 환불
    // ========================
    else if (/헬스|피트니스|PT|운동|환불.*거부|중도.*해지|회원권/.test(content)) {
        title = '회원권 환불 청구 및 불공정 약관 무효 주장의 건';
        introduction = `본인(${senderName})은 귀 업체의 회원권을 구매한 소비자입니다.`;

        body = `1. 본인은 개인적인 사정(이사/질병/업체 약속 불이행 등)으로 인해 더 이상 시설을 이용할 수 없어 중도 해지 및 환불을 요청하였습니다.

2. 그러나 귀 업체는 정당한 사유 없이 환불을 거부하거나, 과도한 위약금을 공제하려 하고 있습니다.

3. 체육시설법에 따르면 이용자는 중도에 계약을 해지할 수 있으며, 업체는 미사용 기간에 해당하는 금액을 환불해야 합니다.`;

        legalBasis = '체육시설의 설치·이용에 관한 법률 제27조(회원 모집의 방법 등), 소비자분쟁해결기준에 의거하여 중도 해지 시 미사용 금액의 환불을 청구합니다.';

        warning = '귀 업체가 본 요구에 응하지 않을 경우, 본인은 1372 소비자상담센터 및 한국소비자원에 피해구제를 신청하고, 필요시 소액심판을 청구할 것입니다.';

        demands = [
            '미사용 기간에 해당하는 회원권 대금 환불',
            '불공정 약관에 따른 과도한 위약금 부과 철회',
            '환불 금액 및 일정 서면 통보'
        ];
    }
    // ========================
    // 이사/택배 파손
    // ========================
    else if (/이사|택배|파손|분실|배송|물건.*망가|박스.*찢어/.test(content)) {
        title = '물품 파손(분실)에 대한 손해배상 청구의 건';
        introduction = `본인(${senderName})은 귀사의 이사(택배) 서비스를 이용한 소비자입니다.`;

        body = `1. 본인은 귀사의 이사(택배) 서비스를 이용하여 물품을 운송하였습니다.

2. 그러나 운송 과정에서 본인의 물품이 파손(분실)되었으며, 이로 인해 금전적 손해가 발생하였습니다.

3. 귀사는 운송인으로서 물품을 안전하게 운송할 의무가 있으며, 이를 위반한 것에 대한 책임이 있습니다.`;

        legalBasis = '상법 제135조(운송인의 손해배상책임), 민법 제390조(채무불이행과 손해배상)에 의거하여 운송 중 발생한 물품 파손에 대한 손해배상을 청구합니다.';

        warning = '귀사가 본 요구에 응하지 않을 경우, 본인은 1372 소비자상담센터 및 한국소비자원에 피해구제를 신청하고, 필요시 손해배상 청구 소송을 제기할 것입니다.';

        demands = [
            '파손(분실) 물품에 대한 시가 상당 손해배상',
            '손해배상 금액 협의를 위한 연락',
            '재발 방지 대책 수립'
        ];
    }
    // ========================
    // 기본 (채무 불이행)
    // ========================
    else {
        title = '채무 이행 청구 및 법적 조치 예고의 건';
        introduction = `본인(${senderName})은 귀하에 대하여 정당한 채권을 보유한 채권자입니다.`;

        body = `1. 귀하는 본인에게 지급해야 할 금원 ${money}을 현재까지 지급하지 않고 있습니다.

2. 본인은 귀하가 약정한 변제기일을 준수할 것으로 신뢰하였으나, 귀하는 정당한 사유 없이 채무 이행을 지체하고 있습니다.

3. 본인은 귀하에게 수차례에 걸쳐 변제를 독촉하였으나, 귀하는 이를 묵살하거나 차일피일 변제를 미루어 왔습니다.

4. 이에 본인은 귀하에게 아래 기한 내 채무 전액을 이행할 것을 최종 요구합니다.`;

        legalBasis = '민법 제390조(채무불이행과 손해배상) 및 민법 제387조(이행지체)에 의거하여 채무 이행 및 손해배상을 청구합니다.';

        warning = '위 기한 내 이행이 없을 경우, 본인은 지체 없이 지급명령 신청 또는 민사소송을 제기할 것입니다. 이 경우 귀하는 원금은 물론, 지연손해금(연 12%), 소송비용, 변호사 보수까지 전액 부담하게 됨을 경고합니다.';

        demands = [
            `채무 원금 ${money}을 즉시 지급할 것`,
            '지연손해금 지급',
            '향후 변제 계획을 서면으로 통보할 것'
        ];
    }

    return {
        title,
        header: '내 용 증 명',
        parties: { recipient: `수신인: ${recipientName}`, sender: `발신인: ${senderName}` },
        introduction,
        body,
        legalBasis,
        warning,
        deadline: '본 서면 도달일로부터 7일 이내',
        demands
    };
}
